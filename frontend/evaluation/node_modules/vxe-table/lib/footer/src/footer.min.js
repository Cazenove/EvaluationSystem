"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var _default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},mounted:function(){var e=this.$parent,t=this.$el,o=this.$refs,l=this.fixedType,r=e.elemStore,n="".concat(l||"main","-footer-");r["".concat(n,"wrapper")]=t,r["".concat(n,"table")]=o.table,r["".concat(n,"colgroup")]=o.colgroup,r["".concat(n,"list")]=o.tfoot,r["".concat(n,"xSpace")]=o.xSpace},render:function(F){var e=this._e,L=this.$parent,P=this.fixedType,t=this.fixedColumn,k=this.tableColumn,E=this.footerData,q=L.$listeners,o=L.tId,l=L.footerRowClassName,A=L.footerCellClassName,r=L.footerRowStyle,D=L.footerCellStyle,X=L.footerAlign,N=L.footerSpanMethod,O=L.align,R=L.scrollXLoad,M=L.columnKey,j=L.showFooterOverflow,z=L.currentColumn,B=L.overflowX,n=L.scrollbarWidth;return N||(P&&j?k=t:R&&P&&(k=t)),F("div",{class:["vxe-table--footer-wrapper",P?"fixed-".concat(P,"--wrapper"):"body--wrapper"],attrs:{"data-tid":o},on:{scroll:this.scrollEvent}},[P?e():F("div",{class:"vxe-body--x-space",ref:"xSpace"}),F("table",{class:"vxe-table--footer",attrs:{"data-tid":o,cellspacing:0,cellpadding:0,border:0},ref:"table"},[F("colgroup",{ref:"colgroup"},k.map(function(e,t){return F("col",{attrs:{name:e.id},key:t})}).concat(n?[F("col",{attrs:{name:"col_gutter"}})]:[])),F("tfoot",{ref:"tfoot"},E.map(function(S,U){return F("tr",{class:["vxe-footer--row",l?_xeUtils.default.isFunction(l)?l({$table:L,$rowIndex:U,fixed:P}):l:""],style:r?_xeUtils.default.isFunction(r)?r({$table:L,$rowIndex:U,fixed:P}):r:null},k.map(function(t,o){var e,l=t.showFooterOverflow,r=t.footerAlign,n=t.align,i=t.footerClassName,a=t.children&&t.children.length,c=P?t.fixed!==P&&!a:t.fixed&&B,s=_xeUtils.default.isUndefined(l)||_xeUtils.default.isNull(l)?j:l,d=r||n||X||O,f="ellipsis"===s,u="title"===s,p=!0===s||"tooltip"===s,x=u||p||f,m={"data-colid":t.id},v={},_=L.getColumnIndex(t),b=L._getColumnIndex(t),y=b,g={$table:L,$rowIndex:U,column:t,columnIndex:_,$columnIndex:o,_columnIndex:b,itemIndex:y,items:S,fixed:P,data:E};if(R&&!x&&(f=x=!0),(u||p)&&(v.mouseenter=function(e){u?_tools.DomTools.updateCellTitle(e,t):p&&L.triggerFooterTooltipEvent(e,g)}),p&&(v.mouseleave=function(e){p&&L.handleTargetLeaveEvent(e)}),q["footer-cell-click"]&&(v.click=function(e){_tools.UtilTools.emitEvent(L,"footer-cell-click",[{$table:L,$rowIndex:U,column:t,columnIndex:_,$columnIndex:o,_columnIndex:b,itemIndex:y,items:S,fixed:P,data:E,cell:e.currentTarget},e])}),q["footer-cell-dblclick"]&&(v.dblclick=function(e){_tools.UtilTools.emitEvent(L,"footer-cell-dblclick",[{$table:L,$rowIndex:U,column:t,columnIndex:_,$columnIndex:o,_columnIndex:b,itemIndex:y,items:S,fixed:P,data:E,cell:e.currentTarget},e])}),N){var h=N(g)||{},$=h.rowspan,w=void 0===$?1:$,I=h.colspan,T=void 0===I?1:I;if(!w||!T)return null;1<w&&(m.rowspan=w),1<T&&(m.colspan=T)}var C="seq"===t.type||"index"===t.type?"seq":t.type;return F("td",{class:["vxe-footer--column",t.id,(_defineProperty(e={},"col--".concat(d),d),_defineProperty(e,"col--".concat(C),C),_defineProperty(e,"col--last",o===k.length-1),_defineProperty(e,"fixed--hidden",c),_defineProperty(e,"col--ellipsis",x),_defineProperty(e,"col--current",z===t),e),_tools.UtilTools.getClass(i,g),_tools.UtilTools.getClass(A,g)],attrs:m,style:D?_xeUtils.default.isFunction(D)?D(g):D:null,on:v,key:M?t.id:o},[F("div",{class:["vxe-cell",{"c--title":u,"c--tooltip":p,"c--ellipsis":f}]},t.renderFooter(F,g))])}).concat(n?[F("td",{class:"col--gutter"})]:[]))}))])])},methods:{scrollEvent:function(e){var t=this.$parent,o=this.fixedType,l=t.$refs,r=t.scrollXLoad,n=t.triggerScrollXEvent,i=t.lastScrollLeft,a=l.tableHeader,c=a?a.$el:null,s=l.tableBody.$el,d=l.tableFooter.$el.scrollLeft,f=d!==i;t.lastScrollLeft=d,t.lastScrollTime=Date.now(),c&&(c.scrollLeft=d),s&&(s.scrollLeft=d),r&&f&&n(e),_tools.UtilTools.emitEvent(t,"scroll",[{type:"footer",fixed:o,scrollTop:s.scrollTop,scrollLeft:d,isX:f,isY:!1,$table:t,$event:e},e])}}};exports.default=_default;