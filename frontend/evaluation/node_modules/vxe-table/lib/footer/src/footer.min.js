"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var _default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},mounted:function(){var e=this.$parent,t=this.$el,l=this.$refs,o=this.fixedType,r=e.elemStore,n="".concat(o||"main","-footer-");r["".concat(n,"wrapper")]=t,r["".concat(n,"table")]=l.table,r["".concat(n,"colgroup")]=l.colgroup,r["".concat(n,"list")]=l.tfoot,r["".concat(n,"xSpace")]=l.xSpace},render:function(U){var e=this._e,F=this.$parent,L=this.fixedType,t=this.fixedColumn,P=this.tableColumn,k=this.footerData,E=F.$listeners,l=F.id,o=F.footerRowClassName,q=F.footerCellClassName,r=F.footerRowStyle,A=F.footerCellStyle,D=F.footerAlign,O=F.footerSpanMethod,X=F.align,n=F.scrollXLoad,N=F.columnKey,R=F.showFooterOverflow,M=F.currentColumn,j=F.overflowX,i=F.scrollbarWidth,z=F.getColumnIndex;return O||(L&&R?P=t:n&&L&&(P=t)),U("div",{class:["vxe-table--footer-wrapper",L?"fixed-".concat(L,"--wrapper"):"body--wrapper"],attrs:{"data-tid":l},on:{scroll:this.scrollEvent}},[L?e():U("div",{class:"vxe-body--x-space",ref:"xSpace"}),U("table",{class:"vxe-table--footer",attrs:{"data-tid":l,cellspacing:0,cellpadding:0,border:0},ref:"table"},[U("colgroup",{ref:"colgroup"},P.map(function(e,t){return U("col",{attrs:{name:e.id},key:t})}).concat(i?[U("col",{attrs:{name:"col_gutter"}})]:[])),U("tfoot",{ref:"tfoot"},k.map(function(I,S){return U("tr",{class:["vxe-footer--row",o?_xeUtils.default.isFunction(o)?o({$table:F,$rowIndex:S,fixed:L}):o:""],style:r?_xeUtils.default.isFunction(r)?r({$table:F,$rowIndex:S,fixed:L}):r:null},P.map(function(t,l){var e,o=t.showFooterOverflow,r=t.footerAlign,n=t.align,i=t.footerClassName,a=t.children&&t.children.length,s=L?t.fixed!==L&&!a:t.fixed&&j,c=_xeUtils.default.isUndefined(o)||_xeUtils.default.isNull(o)?R:o,d=r||n||D||X,f="ellipsis"===c,u="title"===c,p=!0===c||"tooltip"===c,x=u||p||f,m={"data-colid":t.id},v={},b=z(t),y=F.tableColumn.indexOf(t),_={$table:F,$rowIndex:S,column:t,columnIndex:b,$columnIndex:l,itemIndex:y,items:I,fixed:L,data:k};if((u||p)&&(v.mouseenter=function(e){u?_tools.DomTools.updateCellTitle(e):p&&F.triggerFooterTooltipEvent(e,_)}),p&&(v.mouseleave=function(e){p&&F.handleTargetLeaveEvent(e)}),E["footer-cell-click"]&&(v.click=function(e){_tools.UtilTools.emitEvent(F,"footer-cell-click",[{$table:F,$rowIndex:S,column:t,columnIndex:b,$columnIndex:l,itemIndex:y,items:I,fixed:L,data:k,cell:e.currentTarget},e])}),E["footer-cell-dblclick"]&&(v.dblclick=function(e){_tools.UtilTools.emitEvent(F,"footer-cell-dblclick",[{$table:F,$rowIndex:S,column:t,columnIndex:b,$columnIndex:l,itemIndex:y,items:I,fixed:L,data:k,cell:e.currentTarget},e])}),O){var g=O(_)||{},h=g.rowspan,$=void 0===h?1:h,w=g.colspan,T=void 0===w?1:w;if(!$||!T)return null;m.rowspan=$,m.colspan=T}var C="seq"===t.type||"index"===t.type?"seq":t.type;return U("td",{class:["vxe-footer--column",t.id,(_defineProperty(e={},"col--".concat(d),d),_defineProperty(e,"col--".concat(C),C),_defineProperty(e,"col--last",l===P.length-1),_defineProperty(e,"fixed--hidden",s),_defineProperty(e,"col--ellipsis",x),_defineProperty(e,"col--current",M===t),e),_tools.UtilTools.getClass(i,_),_tools.UtilTools.getClass(q,_)],attrs:m,style:A?_xeUtils.default.isFunction(A)?A(_):A:null,on:v,key:N?t.id:l},[U("div",{class:["vxe-cell",{"c--title":u,"c--tooltip":p,"c--ellipsis":f}]},t.renderFooter(U,_))])}).concat(i?[U("td",{class:"col--gutter"})]:[]))}))])])},methods:{scrollEvent:function(e){var t=this.$parent,l=this.fixedType,o=t.$refs,r=t.scrollXLoad,n=t.triggerScrollXEvent,i=t.lastScrollLeft,a=o.tableHeader,s=a?a.$el:null,c=o.tableBody.$el,d=o.tableFooter.$el.scrollLeft,f=d!==i;t.lastScrollLeft=d,t.lastScrollTime=Date.now(),s&&(s.scrollLeft=d),c&&(c.scrollLeft=d),r&&f&&n(e),_tools.UtilTools.emitEvent(t,"scroll",[{type:"footer",fixed:l,scrollTop:c.scrollTop,scrollLeft:d,isX:f,isY:!1,$table:t,$event:e},e])}}};exports.default=_default;